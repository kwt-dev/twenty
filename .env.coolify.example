# =============================================================================
# Twenty Fork - Coolify Production Environment Configuration
# =============================================================================
# Copy this file to .env.coolify and update values for your Coolify deployment
# This file shows the environment variables needed for each service in Coolify

# =============================================================================
# TWENTY BACKEND SERVICE ENVIRONMENT VARIABLES
# =============================================================================

# Application Configuration
NODE_ENV=production
NODE_PORT=3200
APP_SECRET=your-secure-app-secret-here-change-this-in-production

# Database Configuration
PG_DATABASE_URL=postgresql://postgres:your-secure-password@twenty-postgres:5432/twenty

# Redis Configuration  
REDIS_URL=redis://twenty-redis:6379/2

# Server Configuration
SERVER_URL=https://api.yourdomain.com

# Feature Flags
DISABLE_DB_MIGRATIONS=false
DISABLE_CRON_JOBS_REGISTRATION=false
STORAGE_TYPE=local
IS_CONFIG_VARIABLES_IN_DB_ENABLED=false

# =============================================================================
# TWENTY WORKER SERVICE ENVIRONMENT VARIABLES
# =============================================================================
# Same as backend but with these overrides:

# DISABLE_DB_MIGRATIONS=true
# DISABLE_CRON_JOBS_REGISTRATION=true

# =============================================================================
# TWENTY FRONTEND SERVICE ENVIRONMENT VARIABLES
# =============================================================================

# Frontend Configuration
REACT_APP_SERVER_BASE_URL=https://api.yourdomain.com

# =============================================================================
# COOLIFY SERVICE CONFIGURATION REFERENCE
# =============================================================================

# Backend Service:
# - Name: twenty-backend
# - Image: ghcr.io/spensermcconnell/twenty/twenty-backend:latest
# - Port: 3200
# - Health Check: /healthz
# - Memory: 2G
# - CPU: 1000m
# - Volume: /app/packages/twenty-server/.local-storage

# Worker Service:
# - Name: twenty-worker  
# - Image: ghcr.io/spensermcconnell/twenty/twenty-backend:latest
# - Command: ["yarn", "worker:prod"]
# - Memory: 2G
# - CPU: 500m
# - Volume: /app/packages/twenty-server/.local-storage (shared with backend)

# Frontend Service:
# - Name: twenty-frontend
# - Image: ghcr.io/spensermcconnell/twenty/twenty-frontend:latest
# - Port: 80
# - Health Check: /health
# - Memory: 512M
# - CPU: 250m

# PostgreSQL Service:
# - Name: twenty-postgres
# - Image: postgres:16-alpine
# - Database: twenty
# - Username: postgres
# - Password: your-secure-password
# - Port: 5432

# Redis Service:
# - Name: twenty-redis
# - Image: redis:7-alpine
# - Port: 6379
# - Command: --maxmemory-policy noeviction